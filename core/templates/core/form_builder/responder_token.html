{% extends 'base.html' %}
{% block content %}
<div class="max-w-xl mx-auto bg-white shadow rounded p-6 mt-6">
  <h1 class="text-2xl font-bold text-purple-700 mb-2">{{ formulario.titulo }}</h1>
  <p class="text-gray-600 mb-6">{{ formulario.descricao }}</p>

  <form method="POST">
    {% csrf_token %}

    {% for pergunta in perguntas %}
      <div class="mb-6">
        <label class="block font-medium text-gray-800 mb-1">
          {{ forloop.counter }}. {{ pergunta.texto }}
          {% if pergunta.obrigatoria %}<span class="text-red-500">*</span>{% endif %}
        </label>

        {% if pergunta.tipo == 'short-text' %}
          <input type="text" name="pergunta_{{ pergunta.id }}"
                 class="w-full border rounded p-2 focus:ring-2 focus:ring-purple-500"
                 {% if pergunta.obrigatoria %} required {% endif %}>

        {% elif pergunta.tipo == 'paragraph' %}
          <textarea name="pergunta_{{ pergunta.id }}"
                    class="w-full border rounded p-2 focus:ring-2 focus:ring-purple-500"
                    rows="4"
                    {% if pergunta.obrigatoria %} required {% endif %}></textarea>

        {% elif pergunta.tipo == 'multiple-choice' %}
          {% for opcao in pergunta.opcoes.all %}
            <label class="block mb-1">
              <input type="radio" name="pergunta_{{ pergunta.id }}" value="{{ opcao.texto }}"
                     class="mr-2" {% if pergunta.obrigatoria and forloop.first %} required {% endif %}>
              {{ opcao.texto }}
            </label>
          {% endfor %}

        {% elif pergunta.tipo == 'checkbox' %}
          {% for opcao in pergunta.opcoes.all %}
            <label class="block mb-1">
              <input type="checkbox" name="pergunta_{{ pergunta.id }}" value="{{ opcao.texto }}"
                     class="mr-2">
              {{ opcao.texto }}
            </label>
          {% endfor %}

        {% elif pergunta.tipo == 'dropdown' %}
          <select name="pergunta_{{ pergunta.id }}"
                  class="w-full border rounded p-2 focus:ring-2 focus:ring-purple-500"
                  {% if pergunta.obrigatoria %} required {% endif %}>
            <option value="">Selecione...</option>
            {% for opcao in pergunta.opcoes.all %}
              <option value="{{ opcao.texto }}">{{ opcao.texto }}</option>
            {% endfor %}
          </select>
        {% endif %}
      </div>
    {% endfor %}

    <button type="submit"
            class="w-full bg-purple-600 text-white py-2 px-4 rounded hover:bg-purple-700 transition">
      Enviar Respostas
    </button>
  </form>
</div>
{% endblock %}
